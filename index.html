<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="UTF-8">
		<title>Label Generator</title>

		<style>

			html { background: url(images/debut_dark.png) repeat 0 0 ;}

			#wrapper {
				width: 860px;
				margin: 0 auto;
				margin-top: 100px;
				min-height: 40px;
			}


			#actions {
				float: left;
				width: 400px;
			}
			#labelOutput {
				height: 300px;
				margin-bottom: 20px;
			}

			#controls {
				height: 190px;
			}

			#cssOutput {
				float: right;
				width: 400px;
			}

			#cssOutput #code {
				width: 390px;
				display: block;
				background-color: rgba(0,0,0,0.24);
				-webkit-box-shadow: 0 1px 1px 0 rgba(255,255,255,0.3),inset 0 1px 5px rgba(0,0,0,0.1);
				-moz-box-shadow:    0 1px 1px 0 rgba(255,255,255,0.3),inset 0 1px 5px rgba(0,0,0,0.1);
				box-shadow:         0 1px 1px 0 rgba(255,255,255,0.3),inset 0 1px 5px rgba(0,0,0,0.1);
				border-radius: 5px;
				white-space: pre;
				color: white;
				color: rgba(255,255,255,0.8);
				text-shadow: 0 1px 1px black;
				font-size: 11px;
				font-family: "Courier new";
				font-weight: bold;
				padding: 10px;
			}

			.labelContainer{ position: relative;}

		</style>

		<script type='text/javascript' src='http://code.jquery.com/jquery-1.9.0.min.js'></script>
		<script type="text/javascript">

			var cssElements = Array();
			var outputCSS = "", outputHTML = "";

			cssElements['width'] = 250;
			cssElements['height'] = 100;
			cssElements['borderColor'] = "red";
			cssElements['backgroundColor'] = "grey";
			cssElements['borderWidth'] = 2;
			cssElements['fontSize'] = 40;
			cssElements['fontWeight'] = "bold";
			cssElements['fontColor'] = "black";
			cssElements['backgroundTrans'] = "transparent";
			cssElements['message'] = "Here";
			cssElements['borderQuestion'] = 1;
			cssElements['box-shadow'] = 1;
			cssElements['position'] = "left";

			function makeHTML() {
				outputHTML = "<div class='labelContainer'><div class='labelArrow'><div class='labelArrowInner'></div></div><div class='labelBox'><div class='labelBoxInner'><span class='labelMessage'>"+cssElements['message']+"</span></div></div></div>";

				$("#labelOutput").html(outputHTML);
			}

			function makeCSS() {

				cssElements['labelBoxLeft'] = Math.round(cssElements['height'] / 2);

				outputCSS = ".labelBox {\n";
				outputCSS += "\twidth: " + cssElements['width'] + "px;\n";
				outputCSS += "\theight: " + cssElements['height'] + "px;\n";
				outputCSS += "\tposition: absolute;\n";

				if (cssElements['position'] == "left")
					outputCSS += "\tleft: " + cssElements['labelBoxLeft'] + "px;\n";

				outputCSS += "\ttop: 0;\n";
				outputCSS += "\tdisplay: block;\n";		
				outputCSS += "\tbackground-color: " + cssElements['backgroundColor'] + ";\n";
				outputCSS += "\ttext-align: center;\n";
				outputCSS += "\tline-height: " + (cssElements['height'] - cssElements['borderWidth']) + "px;\n";
				outputCSS += "\tfont-size: " + cssElements['fontSize'] + "px;\n";
				outputCSS += "\tfont-weight: " + cssElements['fontWeight'] + ";\n";
				outputCSS += "\tfont-family: Arial, sans-serif;\n";
				outputCSS += "\tcolor: " + cssElements['fontColor'] + ";\n";

				if (parseInt(cssElements['box-shadow']) == 1) {
					outputCSS += "\tbox-shadow: rgba(0,0,0,0.3) 0 1px 1px;\n";
					outputCSS += "\t-moz-box-shadow: rgba(0,0,0,0.3) 0 1px 1px;\n";
					outputCSS += "\t-webkit-box-shadow: rgba(0,0,0,0.3) 0 1px 1px;\n";
				}

				outputCSS += "}\n";

				if (parseInt(cssElements['borderQuestion']) == 1) {
					outputCSS += ".labelBoxInner {\n";
					outputCSS += "\twidth: " + (cssElements['width'] - cssElements['borderWidth']) + "px;\n";
					outputCSS += "\theight: " + (cssElements['height'] - cssElements['borderWidth'] - cssElements['borderWidth']) + "px;\n";
					outputCSS += "\tposition: absolute;\n";

					if (cssElements['position'] == "right")
						outputCSS += "\tleft: " + cssElements['borderWidth'] + "px;\n";
					
					outputCSS += "\tdisplay: block;\n";
					outputCSS += "\ttop: " + cssElements['borderWidth'] + "px;\n";
					outputCSS += "\tbackground-color: " + cssElements['borderColor'] + ";\n";
					outputCSS += "\tcontent: '"+ cssElements['message']+"';\n";
					outputCSS += "}\n";
				}

				outputCSS += ".labelArrow {\n";
				outputCSS += "\twidth: 0;\n";
				outputCSS += "\theight: 0;\n";
				outputCSS += "\tborder-top: " + cssElements['labelBoxLeft'] + "px solid " + cssElements['backgroundTrans'] + ";\n";
				outputCSS += "\tborder-bottom: " + cssElements['labelBoxLeft'] + "px solid " + cssElements['backgroundTrans'] + ";\n";
				
				if (cssElements['position'] == "right") {
					outputCSS += "\tborder-left: " + cssElements['labelBoxLeft'] + "px solid " + cssElements['backgroundColor'] + ";\n";
					outputCSS += "\tleft: " + cssElements['width'] + "px;\n";
				}
				else
					outputCSS += "\tborder-right: " + cssElements['labelBoxLeft'] + "px solid " + cssElements['backgroundColor'] + ";\n";

				outputCSS += "\tbackground-color: " + cssElements['backgroundTrans'] + ";\n";
				outputCSS += "\tposition: relative;\n";
				outputCSS += "}\n";

				if (parseInt(cssElements['borderQuestion']) == 1) {
					outputCSS += ".labelArrowInner {\n";
					outputCSS += "\tcontent: '';\n";
					outputCSS += "\twidth: 0;\n";
					outputCSS += "\theight: 0;\n";
					outputCSS += "\tborder-top: " + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px solid " + cssElements['backgroundTrans'] + ";\n";
					outputCSS += "\tborder-bottom: " + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px solid " + cssElements['backgroundTrans'] + ";\n";

					if (cssElements['position'] == "right")
						outputCSS += "\tborder-left: " + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px solid " + cssElements['borderColor'] + ";\n";
					else
						outputCSS += "\tborder-right: " + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px solid " + cssElements['borderColor'] + ";\n";

					outputCSS += "\tbackground-color: " + cssElements['backgroundTrans'] + ";\n";
					outputCSS += "\tposition: absolute;\n";
					outputCSS += "\ttop: -" + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px;\n";
					
					if (cssElements['position'] == "right") {
						var tmp = parseInt(cssElements['labelBoxLeft']) + 1;
						outputCSS += "\tleft: -" + tmp +  "px;\n";
					} else {
						var tmp = parseInt(cssElements['borderWidth']) + 1;
						outputCSS += "\tleft: " + tmp +  "px;\n";
					}
					outputCSS += "}\n";
				}

				$("#activeStyle").replaceWith("<style id='activeStyle' type='text/css'>" + outputCSS + "</style>");
				$("#cssOutput #code").html(outputCSS);
			}


			$(document).ready(function() {

				$("head").append("<style id='activeStyle' type='text/css'></style>");
				
				makeHTML();
				makeCSS();				
				
				$("#width").val(cssElements['width']);
				$("#height").val(cssElements['height']);
				$("#box-shadow").val(cssElements['box-shadow']);
				$("#borderWidth").val(cssElements['borderWidth']);
				$("#fontSize").val(cssElements['fontSize']);
				$("#borderColor").val(cssElements['borderColor']);
				$("#backgroundColor").val(cssElements['backgroundColor']);
				$("#borderQuestion").val(cssElements['borderQuestion']);
				$("#fontSize").val(cssElements['fontSize']);
				$("#fontColor").val(cssElements['fontColor']);
				$("#message").val(cssElements['message']);



				$(".settings input").change(function() {
					cssElements[$(this).attr("id")] = $(this).val();
					makeHTML();
					makeCSS();
				});
			});
		</script>
	</head>
	<body>
		<div id="wrapper">

				<div id="actions">
					<div id="labelOutput"></div>

					<div id="controls">
						<div id="controlsOne">

							<form class="settings">
								<div class="form-title">Width</div>
								<input class="form-field" type="text" id="width"/><br />
								<div class="form-title">Height</div>
								<input class="form-field" type="text" id="height" /><br />
								<div class="form-title">Position</div>
								Left: <input class="form-field" type="radio" id="position" name="position" checked="checked" value="left"/><br/>
								Right: <input class="form-field" type="radio" id="position" name="position" value="right"/><br/>

								<div class="form-title">Box Shadow</div>
								<input class="form-field" type="text" id="box-shadow" /><br />
							</form>
							Padding
						</div>

						<div id="controlsTwo">
							<form class="settings">
								<div class="form-title">Border?</div>
								<input class="form-field" type="text" id="borderQuestion"/><br />
								<div class="form-title">Border Colour</div>
								<input class="form-field" type="text" id="borderColor"/><br />
								<div class="form-title">Border Width</div>
								<input class="form-field" type="text" id="borderWidth" /><br />
								<div class="form-title">Fill Colour</div>
								<input class="form-field" type="text" id="backgroundColor" /><br />
							</form>
							BOrder Thickness
						</div>

						<div id="controlsThree">
							<form class="settings">
								<div class="form-title">Font Size</div>
								<input class="form-field" type="text" id="fontSize"/><br />
								<div class="form-title">Font Colour</div>
								<input class="form-field" type="text" id="fontColor"/><br />
								<div class="form-title">Font Message</div>
								<input class="form-field" type="text" id="message" /><br />
							</form>
						</div>

					</div>
				</div>

			<div id="cssOutput">
				<code id="code" readonly="readonly"></code>
			</div>

		</div>
	</body>
</html>