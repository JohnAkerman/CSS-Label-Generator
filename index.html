<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="UTF-8">
		<title>Label Generator</title>
		<link rel="stylesheet" type="text/css" href="css/normalise.css">
		<link rel="stylesheet" type="text/css" href="css/jquery-ui.css">
		<link rel="stylesheet" type="text/css" href="css/label-gen.css">
		<script type='text/javascript' src="jquery-1.9.0.js"></script>
		<script type="text/javascript" src="jquery-ui-1.10.0.custom.min.js"></script>
		<script type="text/javascript">

			var cssElements = Array();
			var outputCSS = "", outputHTML = "";

			cssElements['width'] = 300;
			cssElements['height'] = 100;
			cssElements['borderColor'] = "red";
			cssElements['backgroundColor'] = "grey";
			cssElements['borderWidth'] = 25;
			cssElements['fontSize'] = 30;
			cssElements['fontWeight'] = "bold";
			cssElements['fontColor'] = "black";
			cssElements['backgroundTrans'] = "transparent";
			cssElements['message'] = "Message";
			cssElements['borderQuestion'] = 1;
			cssElements['box-shadow'] = 0;
			cssElements['position'] = "left";

			function makeHTML() {
				
				outputHTML = "<div class='labelContainer'><div class='labelArrow'><div class='labelArrowInner'></div></div><div class='labelBox'><div class='labelBoxInner'><span class='labelMessage'>"+cssElements['message']+"</span></div></div></div>";

				$("#labelOutput").html(outputHTML);
			}

			function makeCSS() {

				cssElements['labelBoxLeft'] = Math.round(cssElements['height'] / 2);

				outputCSS = ".labelBox {\n";
				outputCSS += "\twidth: " + cssElements['width'] + "px;\n";
				outputCSS += "\theight: " + cssElements['height'] + "px;\n";
				outputCSS += "\tposition: absolute;\n";

				if (cssElements['position'] == "left")
					outputCSS += "\tleft: " + cssElements['labelBoxLeft'] + "px;\n";

				outputCSS += "\ttop: 0;\n";
				outputCSS += "\tdisplay: block;\n";		
				outputCSS += "\tbackground-color: " + cssElements['backgroundColor'] + ";\n";
				outputCSS += "\ttext-align: center;\n";
				outputCSS += "\tline-height: " + (cssElements['height'] - cssElements['borderWidth']) + "px;\n";
				outputCSS += "\tfont-size: " + cssElements['fontSize'] + "px;\n";
				outputCSS += "\tfont-weight: " + cssElements['fontWeight'] + ";\n";
				outputCSS += "\tfont-family: Arial, sans-serif;\n";
				outputCSS += "\tcolor: " + cssElements['fontColor'] + ";\n";

				if (parseInt(cssElements['box-shadow']) == 1) {
					outputCSS += "\tbox-shadow: rgba(0,0,0,0.3) 0 1px 1px;\n";
					outputCSS += "\t-moz-box-shadow: rgba(0,0,0,0.3) 0 1px 1px;\n";
					outputCSS += "\t-webkit-box-shadow: rgba(0,0,0,0.3) 0 1px 1px;\n";
				}

				outputCSS += "}\n";

				if (parseInt(cssElements['borderQuestion']) == 1) {
					outputCSS += ".labelBoxInner {\n";
					outputCSS += "\twidth: " + (cssElements['width'] - cssElements['borderWidth']) + "px;\n";
					outputCSS += "\theight: " + (cssElements['height'] - cssElements['borderWidth'] - cssElements['borderWidth']) + "px;\n";
					outputCSS += "\tposition: absolute;\n";

					if (cssElements['position'] == "right")
						outputCSS += "\tleft: " + cssElements['borderWidth'] + "px;\n";
					
					outputCSS += "\tdisplay: block;\n";
					outputCSS += "\ttop: " + cssElements['borderWidth'] + "px;\n";
					outputCSS += "\tbackground-color: " + cssElements['borderColor'] + ";\n";
					outputCSS += "\tcontent: '';\n";
					outputCSS += "}\n";
				}

				outputCSS += ".labelArrow {\n";
				outputCSS += "\twidth: 0;\n";
				outputCSS += "\theight: 0;\n";
				outputCSS += "\tborder-top: " + cssElements['labelBoxLeft'] + "px solid " + cssElements['backgroundTrans'] + ";\n";
				outputCSS += "\tborder-bottom: " + cssElements['labelBoxLeft'] + "px solid " + cssElements['backgroundTrans'] + ";\n";
				
				if (cssElements['position'] == "right") {
					outputCSS += "\tborder-left: " + cssElements['labelBoxLeft'] + "px solid " + cssElements['backgroundColor'] + ";\n";
					outputCSS += "\tleft: " + cssElements['width'] + "px;\n";
				}
				else
					outputCSS += "\tborder-right: " + cssElements['labelBoxLeft'] + "px solid " + cssElements['backgroundColor'] + ";\n";

				outputCSS += "\tbackground-color: " + cssElements['backgroundTrans'] + ";\n";
				outputCSS += "\tposition: relative;\n";
				outputCSS += "}\n";

				if (parseInt(cssElements['borderQuestion']) == 1) {
					outputCSS += ".labelArrowInner {\n";
					outputCSS += "\tcontent: '';\n";
					outputCSS += "\twidth: 0;\n";
					outputCSS += "\theight: 0;\n";
					outputCSS += "\tborder-top: " + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px solid " + cssElements['backgroundTrans'] + ";\n";
					outputCSS += "\tborder-bottom: " + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px solid " + cssElements['backgroundTrans'] + ";\n";

					if (cssElements['position'] == "right")
						outputCSS += "\tborder-left: " + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px solid " + cssElements['borderColor'] + ";\n";
					else
						outputCSS += "\tborder-right: " + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px solid " + cssElements['borderColor'] + ";\n";

					outputCSS += "\tbackground-color: " + cssElements['backgroundTrans'] + ";\n";
					outputCSS += "\tposition: absolute;\n";
					outputCSS += "\ttop: -" + (cssElements['labelBoxLeft'] - cssElements['borderWidth']) + "px;\n";
					
					if (cssElements['position'] == "right") {
						var tmp = parseInt(cssElements['labelBoxLeft']) + 1;
						outputCSS += "\tleft: -" + tmp +  "px;\n";
					} else {
						var tmp = parseInt(cssElements['borderWidth']) + 1;
						outputCSS += "\tleft: " + tmp +  "px;\n";
					}
					outputCSS += "}\n";
				}

				$("#activeStyle").replaceWith("<style id='activeStyle' type='text/css'>" + outputCSS + "</style>");
				$("#cssOutput #code").html(outputCSS);
			}


			$(document).ready(function() {

				$("head").append("<style id='activeStyle' type='text/css'></style>");
				
				makeHTML();
				makeCSS();

				$('#width').slider({
					value: 300,
					min: 10,
					max: 500,
					slide: function(event, ui) {
						cssElements['width'] = ui.value;
					    makeCSS();
					}
				});	

				$('#height').slider({
					value: 100,
					min: 10,
					max: 200,
					slide: function(event, ui) {
						cssElements['height'] = ui.value;
					    makeCSS();
					}
				});	

				$('#position').slider({
					value: 0,
					min: 0,
					max: 1,
					slide: function(event, ui) {
						if (ui.value == 0)
					    	cssElements['position'] = "left";
					    else
					    	cssElements['position'] = "right";

					    makeCSS();
					}
				});				

				$('#borderQuestion').slider({
					value: 1,
					min: 0,
					max: 1,
					slide: function(event, ui) {
					    cssElements['borderQuestion'] = ui.value;
					    makeCSS();
					}
				});	

				$('#borderWidth').slider({
					value: 25,
					min: 1,
					max: 50,
					slide: function(event, ui) {
					    cssElements['borderWidth'] = ui.value;
					    makeCSS();
					}
				});	

				$('#fontSize').slider({
					value: 30,
					min: 9,
					max: 80,
					slide: function(event, ui) {
					    cssElements['fontSize'] = ui.value;
					    makeCSS();
					}
				});	

				$('#tester').slider({
					value: 30,
					min: 9,
					max: 80,
					slide: function(event, ui) {
					    cssElements['fontSize'] = ui.value;
					    makeCSS();
					}
				});	

				$("#borderColor").val(cssElements['borderColor']);
				$("#backgroundColor").val(cssElements['backgroundColor']);
				$("#fontColor").val(cssElements['fontColor']);
				$("#message").val(cssElements['message']);

				$(".settings input").change(function() {
					cssElements[$(this).attr("id")] = $(this).val();
					makeHTML();
					makeCSS();
				});
			});
		</script>
	</head>
	<body>
		<div id="wrapper">

				<div id="actions">
					<div id="labelOutput"></div>

					<div id="controls">
						<div class="controlSet">
							<form class="settings">
								<div class="sliderArea sliderAreaLarge">
									<span>Label Height</span>
									<div id="height"></div><br />
								</div>

								<div class="sliderArea sliderAreaLarge">
									<span>Label Width</span>
									<div id="width"></div><br />
								</div>

								<div class="sliderArea sliderAreaSmall">
									<span>Position</span>
									<div id="position" class="sliderSlide"></div><br />
								</div>
								<div class="clear"></div>
							</form>
						</div>

						<div class="controlSet">
							<form class="settings">
								<div class="sliderArea ">
									<span>Border</span>
									<div id="borderQuestion" class="sliderAreaSmall"></div><br />
								</div>

								<div class="sliderArea ">
									<span>Border Width</span>
									<div id="borderWidth" class=""></div><br />
								</div>

								<div class="form-title">Border Colour</div>
								<input class="form-field" type="text" id="borderColor"/><br />
								
								<div class="form-title">Fill Colour</div>
								<input class="form-field" type="text" id="backgroundColor" /><br />
							</form>
						</div>

						<div class="controlSet">
							<form class="settings">
								<div class="sliderArea ">
									<span>Font Size</span>
									<div id="fontSize" class=""></div><br />
								</div>
								<div class="form-title">Font Colour</div>
								<input class="form-field" type="text" id="fontColor"/><br />
								<div class="form-title">Font Message</div>
								<input class="form-field" type="text" id="message" /><br />
							</form>
						</div>

					</div>
				</div>

			<div id="cssOutput">
				<code id="code" readonly="readonly"></code>
			</div>

		</div>
	</body>
</html>